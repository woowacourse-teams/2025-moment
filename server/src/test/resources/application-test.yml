spring:
  application:
    name: moment
  config:
    import: optional:file:.env[.properties]

  main:
    allow-bean-definition-overriding: true  # 테스트용 Bean override 허용

  datasource:
    url: jdbc:h2:mem:database-test;MODE=MySQL;DATABASE_TO_LOWER=TRUE

  jpa:
    hibernate:
      ddl-auto: none
    properties:
      hibernate:
        show_sql: false
        format_sql: true
        dialect: org.hibernate.dialect.H2Dialect
    open-in-view: false
  flyway:
    enabled: true
    baseline-on-migrate: true
    locations: classpath:db/migration/h2

  # Spring Session JDBC 테스트 설정
  session:
    store-type: jdbc
    jdbc:
      initialize-schema: never  # Flyway로 스키마 관리
      table-name: SPRING_SESSION
    timeout: ${admin.session.timeout:3600s}

  sql:
    init:
      mode: never

  h2:
    console:
      enabled: true

  mail:
    host: smtp.gmail.com
    port: 587
    username: test@gmail.com
    password: itsjusttestvalue
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true

  cloud:
    aws:
      region:
        static: ap-northeast-2
      stack:
        auto: false

jwt:
  secret:
    access_key: test-access-key-for-jwt-token-generation
    refresh_key: test-refresh-key-for-jwt-token-generation

expiration:
  access-token-time: 1800000
  refresh-token-time: 604800000

auth:
  google:
    client-id: test-client-id
    client-secret: test-client-secret
    redirect-uri: test-redirect-uri
    client-uri: test-client-uri
  apple:
    client-ids: com.moment.app,com.moment.app.test
  password_update:
    uri: test-mail-uri

s3:
  bucket-name: test-bucket-1
  bucket-path: test/images
  optimized-bucket-path: test/optimized-images
  cloudfront-domain: https://test-cloudfront.example.com

fcm:
  service-account-json: ""

admin:
  initial:
    email: test-admin@test.com
    password: test-password-123
    name: Test Admin
  session:
    timeout: 3600
    cookie-name: SESSION

app:
  base-url: https://moment.test.com
